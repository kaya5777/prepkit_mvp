<!DOCTYPE html>
<html>
  <head>
    <title>PrepKitMVP</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 0; }
      .layout-root { display: flex; min-height: 100vh; }
      .sidebar {
        width: 240px;
        background: #f7fafc;
        padding: 20px 12px 20px 16px;
        border-right: 1px solid #e2e8f0;
        overflow-y: auto;
      }
      .sidebar h2 { margin-top: 0; font-size: 1.1em; font-weight: bold; }
      .sidebar ul { list-style: none; padding: 0; margin: 0; }
      .sidebar li { margin-bottom: 7px; font-size: 0.98em; }
      .sidebar .top-link { margin-bottom: 18px; display: block; font-weight: bold; }
      .main-content { flex: 1; padding: 36px 24px 24px 32px; }
      .flash { padding: 12px 14px; border-radius: 6px; margin-bottom: 16px; }
      .flash-notice { background: #e6ffed; color: #046c4e; border: 1px solid #98f5b1; }
      .flash-alert { background: #fff5f5; color: #c53030; border: 1px solid #feb2b2; }
      .flash-error { background: #fff5f5; color: #c53030; border: 1px solid #feb2b2; }
      @media (max-width: 800px) {
        .layout-root { flex-direction: column; }
        .sidebar { width: 100%; border-right: 0; border-bottom: 1px solid #e2e8f0; padding: 8px 12px; }
        .main-content { padding: 18px 6px; }
      }
    </style>
  </head>
  <body>
    <div class="layout-root">
      <aside class="sidebar">
        <%= link_to '面接くん', root_path, class: 'top-link' %>
        <h2>履歴</h2>
        <ul>
          <% @sidebar_histories.each do |history| %>
            <li>
              <%= link_to(history.company_name.presence || '（会社名なし）', history_path(history)) %><br>
              <span style="font-size:0.83em;color:#6c737a"><%= history.asked_at&.in_time_zone('Asia/Tokyo')&.strftime('%m/%d %H:%M') %></span>
            </li>
          <% end %>
        </ul>
      </aside>
      <div class="main-content">
        <% flash.each do |type, message| %>
          <% css = case type.to_s
            when 'notice' then 'flash flash-notice'
            when 'alert' then 'flash flash-alert'
            else 'flash flash-error'
          end %>
          <div class="<%= css %>"><%= message %></div>
        <% end %>
        <%= yield %>
      </div>
    </div>
  </body>
</html>
